<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#2563eb">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <title>ThermoCalc Web ‚Äî Accurate Thermodynamic Data</title>
  <style>
    :root{ --bg:#f7f9fc; --card:#fff; --ink:#0f172a; --muted:#475569; --accent:#2563eb; --line:#e2e8f0;
           --ink-strong:#0b1220; --btn:#2563eb; --btn-ink:#fff; --btn-outline:#e2e8f0; }
    *{box-sizing:border-box}
    html{-webkit-text-size-adjust:100%}
    body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.55 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;padding-bottom:env(safe-area-inset-bottom)}
    a{color:var(--accent);text-decoration:none}
    img,svg,video{max-width:100%;height:auto}

    /* Header / Nav */
    header{display:flex;align-items:center;justify-content:space-between;max-width:1040px;margin:24px auto;padding:0 16px;gap:10px}
    .brand{display:flex;align-items:center;gap:8px;font-weight:800;letter-spacing:.2px;line-height:1}
    .brand-logo{height:28px;width:28px;display:block;border-radius:6px;flex:0 0 auto}
    .nav a{color:var(--muted);margin-left:16px}
    .nav a:hover{color:var(--ink)}
    .nav a[aria-current="page"]{font-weight:800;color:var(--ink-strong)}
    #menuBtn{border:1px solid var(--line);background:#fff;border-radius:10px;padding:8px 10px;display:none}

    /* Hero */
    .hero{max-width:1040px;margin:32px auto;padding:0 16px;display:grid;grid-template-columns:1.2fr .9fr;gap:28px}
    .hero h1{margin:.2rem 0 .4rem;font-size:clamp(28px,4.5vw,46px);line-height:1.15;color:var(--ink-strong)}
    .hero p{color:var(--muted);font-size:18px;max-width:62ch}
    .points{margin:18px 0 24px;display:grid;grid-template-columns:1fr 1fr;gap:10px 24px}
    .point{display:flex;gap:10px;align-items:flex-start;color:var(--ink)}
    .point i{font-style:normal;font-size:20px;line-height:1.1}
    .cta{display:flex;gap:12px;margin-top:10px}

    /* Buttons */
    .btn{appearance:none;border:0;border-radius:12px;padding:12px 18px;font-weight:700;cursor:pointer;min-height:44px;line-height:1.2}
    .btn-primary{background:var(--btn);color:var(--btn-ink);box-shadow:0 6px 20px rgba(37,99,235,.25)}
    .btn-outline{background:transparent;border:1px solid var(--btn-outline);color:var(--ink)}

    /* Card & Calculator */
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;box-shadow:0 8px 28px rgba(15,23,42,.08)}
    .calc{padding:18px}
    .calc h3{margin:.2rem 0 .8rem}
    .row{display:grid;grid-template-columns:1fr minmax(180px,1fr) auto;gap:10px}
    .unit{display:grid;grid-template-columns:1fr 56px;gap:8px}
    select,input{width:100%;border:1px solid var(--line);border-radius:10px;padding:10px 12px;background:#fff;color:var(--ink)}
    .calc input[type="number"]{text-align:right;font-variant-numeric:tabular-nums}
    .calc button{width:100%;margin:6px 0 12px}
    .unit input[disabled]{width:56px;text-align:center;padding:8px}

    /* Molecule chips (shown on small screens) */
    .mols{display:none; gap:8px; flex-wrap:wrap; margin:6px 0 10px}
    .chip{
      border:1px solid var(--line);
      background:#fff;
      border-radius:999px;
      padding:8px 12px;
      font-weight:700;
      cursor:pointer;
    }
    .chip[aria-pressed="true"]{ background:var(--btn); color:var(--btn-ink); border-color:var(--btn); }

    /* Results table */
    .mini{border:1px solid var(--line);border-radius:12px;padding:10px}
    .mini table{width:100%;border-collapse:collapse;font-variant-numeric:tabular-nums}
    .mini th,.mini td{padding:8px 10px;border-bottom:1px solid var(--line);text-align:right}
    .mini th:first-child,.mini td:first-child{text-align:left}

    .kicker{color:var(--muted);font-size:14px;margin-top:10px;overflow-wrap:anywhere}
    .footnote{max-width:1040px;margin:18px auto 0;padding:0 16px;color:var(--muted);font-size:14px}

    /* Footer */
    footer{max-width:1040px;margin:40px auto;padding:18px 16px;color:var(--muted);display:flex;justify-content:space-between;gap:12px;font-size:14px;border-top:1px solid var(--line)}
    footer .links a{margin-left:14px}

    .visually-hidden{position:absolute;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);height:1px;width:1px;overflow:hidden;white-space:nowrap}

    /* Responsive */
    @media (max-width:960px){ .hero{grid-template-columns:1fr} }
    @media (max-width:720px){
      .nav{display:none}
      .nav.nav--open{display:block}
      .nav a{display:block;padding:10px 0;margin:0}
      #menuBtn{display:inline-block}
    }
    @media (max-width:560px){
      .card.calc{padding:16px}
      .hero p{font-size:16px}
      footer{flex-direction:column;align-items:flex-start;gap:8px}
      .row{grid-template-columns:1fr}
      .mols{display:flex; overflow-x:auto; white-space:nowrap; -webkit-overflow-scrolling:touch;}
      .mols .chip{flex:0 0 auto}
      #mol{display:none} /* dropdown hidden on mobile; chips visible */
      footer .links a{margin-left:0;margin-right:14px}
    }

    /* Dark mode */
    @media (prefers-color-scheme: dark){
      :root{ --bg:#0b1220;--card:#0f172a;--ink:#e5e7eb;--muted:#94a3b8;--accent:#60a5fa;--line:#1f2937;--ink-strong:#f3f4f6;--btn:#3b82f6;--btn-ink:#fff;--btn-outline:#2b3647; }
      body{background:var(--bg)}
    }
  </style>
</head>
<body>

<header>
  <div class="brand">
    <img src="/logo.png" alt="ThermoCalc logo" class="brand-logo" width="28" height="28">
    ThermoCalc Web
  </div>
  <button id="menuBtn" aria-label="Toggle navigation">‚ò∞</button>
  <nav class="nav">
    <a href="/" aria-current="page">Home</a>
    <a href="/methods.html">Methods &amp; Validation</a>
    <a href="/purchase.html">Purchase</a>
  </nav>
</header>

<section class="hero">
  <div>
    <h1>Accurate Thermodynamic Data in Seconds ‚Äî No Installation Required</h1>
    <p>Explore various thermodynamic values for molecules like CH<sub>4</sub>, O<sub>2</sub>, CO, H<sub>2</sub>O, and NH<sub>3</sub>.</p>

    <div class="points">
      <div class="point"><i>‚ö°</i><div><b>Instant Calculations</b><br><span class="kicker">Enter a molecule and temperature, get results immediately.</span></div></div>
      <div class="point"><i>‚úÖ</i><div><b>Validated Data</b><br><span class="kicker">Benchmarked against NIST CCCBDB.</span></div></div>
      <div class="point"><i>üìÇ</i><div><b>Export Ready</b><br><span class="kicker">Upgrade for custom XLSX export.</span></div></div>
      <div class="point"><i>üéì</i><div><b>Education Friendly</b><br><span class="kicker">Great for homework checks and lectures.</span></div></div>
    </div>

    <div class="cta">
      <a href="#calculator" class="btn btn-primary">Try Free Calculator</a>
      <a href="/purchase.html" class="btn btn-outline">XLSX Export</a>
    </div>
  </div>

  <!-- Calculator -->
  <aside class="card calc" id="calculator" aria-label="Thermodynamic calculator">
    <h3>Thermodynamic Calculations</h3>

    <!-- Molecule chips (shown on small screens) -->
    <div class="mols" role="group" aria-label="Quick molecule picks">
      <button type="button" class="chip" data-mol="CH4">CH‚ÇÑ</button>
      <button type="button" class="chip" data-mol="CO">CO</button>
      <button type="button" class="chip" data-mol="H2O">H‚ÇÇO</button>
      <button type="button" class="chip" data-mol="NH3">NH‚ÇÉ</button>
      <button type="button" class="chip" data-mol="O2">O‚ÇÇ</button>
    </div>

    <div class="row">
      <label class="visually-hidden" for="mol">Molecule</label>
      <select id="mol" aria-label="Molecule">
        <option value="CH4">CH‚ÇÑ</option>
        <option value="CO">CO</option>
        <option value="H2O">H‚ÇÇO</option>
        <option value="NH3">NH‚ÇÉ</option>
        <option value="O2">O‚ÇÇ</option>
      </select>

      <div class="unit">
        <label class="visually-hidden" for="temp">Temperature</label>
        <input id="temp" type="number" min="0.000001" step="0.01" value="298.15" aria-label="Temperature (K)">
        <input value="K" aria-label="Units K" disabled style="text-align:center;border:1px solid var(--line);border-radius:10px;background:#f8fafc;color:var(--muted)">
      </div>

      <button class="btn btn-primary" id="calc" type="button">Calculate</button>
    </div>

    <div class="mini" role="region" aria-label="Results">
      <table>
        <thead><tr><th>Property</th><th>Value</th><th>Unit</th></tr></thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>

    <!-- Low-T message appears here when relevant -->
    <p id="lowT-note" class="kicker" style="margin-top:6px;color:#64748b;"></p>

    <p class="kicker">
      RRHO ideal gas; linear rotors: exact J-sum; nonlinear: classical rigid-rotor; full electronic partition function; Sackur‚ÄìTetrode translation; harmonic-oscillator vibration (p¬∞ = 1 bar).
    </p>
  </aside>
</section>

<p class="footnote">Looking for methodology and benchmarks? See <a href="/methods.html">Methods &amp; Validation</a>.</p>

<section class="card" id="about" aria-label="About ThermoCalc Web" style="max-width:1040px;margin:24px auto;padding:18px">
  <h2>About ThermoCalc Web</h2>
  <p>ThermoCalc Web is developed by a chemist with graduate-level training in thermodynamics. Methods are benchmarked against CCCBDB/NIST reference data, ensuring accuracy and transparency.</p>
</section>

<!-- === Legal Notice (Japan) ‚Äî SCTA compliant section === -->
<section class="card" id="legal-japan" aria-label="Legal Notice (Japan)" style="max-width:1040px;margin:24px auto;padding:18px">
  <h2>Legal Notice (Japan) ‚Äî Act on Specified Commercial Transactions</h2>

  <h3>Seller</h3>
  <p>
    <strong>Business Name:</strong> Disclosed on request (for customers in Japan)<br>
    <strong>Responsible Person:</strong> Thermocalc<br>
    <strong>Address:</strong> Disclosed on request (for customers in Japan)<br>
    <strong>Telephone:</strong> Disclosed on request (for customers in Japan)<br>
    <strong>Contact Email:</strong> <a href="mailto:info@thermocalc.site">info@thermocalc.site</a><br>
    <strong>Website:</strong> <a href="https://thermocalc.site/">https://thermocalc.site/</a>
  </p>

  <h3>Business details on request (for Japan)</h3>
  <p>
    We will provide our full legal name, address, and telephone number <strong>without delay upon request, before purchase</strong>.
    Please contact <a href="mailto:info@thermocalc.site?subject=Business%20details%20request%20(Japan)">info@thermocalc.site</a>.
  </p>
  <p>
    <em>Êó•Êú¨„ÅÆ„ÅäÂÆ¢ÊßòÂêë„ÅëÔºö</em>
    „ÅîË´ãÊ±Ç„Åå„ÅÇ„Å£„ÅüÂ†¥Âêà„ÄÅ<strong>Ë≥ºÂÖ•Ââç„Å´ÈÅÖÊªû„Å™„Åè</strong>„ÄÅ‰∫ãÊ•≠ËÄÖ„ÅÆÊ∞èÂêçÔºàÂêçÁß∞Ôºâ„Éª‰ΩèÊâÄ„ÉªÈõªË©±Áï™Âè∑„ÇíÈñãÁ§∫„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ
    <a href="mailto:info@thermocalc.site?subject=%E7%89%B9%E5%95%86%E6%B3%95%E8%A1%A8%E8%A8%98%E6%83%85%E5%A0%B1%E3%81%AE%E9%96%8B%E7%A4%BA%E8%AB%8B%E6%B1%82">info@thermocalc.site</a> „Åæ„Åß„ÅîÈÄ£Áµ°„Åè„Å†„Åï„ÅÑ„ÄÇ
  </p>

  <h3>Prices</h3>
  <p>USD $9‚Äì$35 (Japanese taxes included). No additional fees.</p>

  <h3>Fees other than price</h3>
  <p>No extra fees are charged.</p>

  <h3>Payment method &amp; timing</h3>
  <p>Credit card (via Stripe). Payment is charged instantly at order time.</p>

  <h3>Delivery / provision timing</h3>
  <p>
    Custom requests: within one week.<br>
    All other services: immediate after successful payment.
  </p>

  <h3>Refunds / cancellations</h3>
  <p>
    Defective: full refund.<br>
    Non-defective: non-refundable.
  </p>

  <h3>System requirements</h3>
  <p>Modern web browser (latest Chrome, Safari, Firefox, or Edge) and internet connection.</p>

  <p class="kicker">
    This section is intended to satisfy the Japanese Act on Specified Commercial Transactions for customers located in Japan.
  </p>
</section>

<footer>
  <div>¬© <span id="yr"></span> ThermoCalc Web. All rights reserved.</div>
  <div class="links">
    <a href="#legal-japan">Legal Notice (Japan)</a>
  </div>
</footer>

<!-- Small UI script: mobile menu -->
<script>
  (function(){
    const btn=document.getElementById('menuBtn');
    const nav=document.querySelector('nav.nav');
    if(!btn||!nav) return;
    const mq=window.matchMedia('(max-width: 720px)');
    function apply(){ btn.style.display=mq.matches?'inline-block':'none'; if(!mq.matches) nav.classList.remove('nav--open'); }
    mq.addEventListener('change',apply); apply();
    btn.addEventListener('click',()=>nav.classList.toggle('nav--open'));
  })();
  document.getElementById('yr').textContent=new Date().getFullYear();
</script>

<!-- Calculator client: calls your API + shows low-T note for non-linear rotors -->
<script>
  const API_URL = "https://thermocalc-vercel-api.vercel.app/api/calc";

  const molSel = document.getElementById("mol");
  const tempEl = document.getElementById("temp");
  const tbody  = document.getElementById("tbody");
  const noteEl = document.getElementById("lowT-note");

  function format(n, d=3){ return Number(n).toFixed(d); }

  // --- Low-T rotation guard (client-side note only) ---
  const ROT_DATA = {
    CO:  { kind:"linear" },
    O2:  { kind:"linear" },
    CH4: { kind:"nonlinear", A:5.2412,  B:5.2412,  C:5.2412,  sigma:12 },
    H2O: { kind:"nonlinear", A:27.8770, B:14.5120, C:9.2850,  sigma:2  },
    NH3: { kind:"nonlinear", A:9.44430, B:9.44430, C:6.19600, sigma:3  }
  };
  const kB = 1.380649e-23, h = 6.62607015e-34, c = 299792458;
  function thetaFromCm1(cm1){ return (h*c*cm1*100)/kB; }
  function lowTRotationMessage(molKey, T){
    const d = ROT_DATA[molKey];
    if(!d || d.kind !== "nonlinear") return "";
    const tA = thetaFromCm1(d.A), tB = thetaFromCm1(d.B), tC = thetaFromCm1(d.C);
    const tMin = Math.min(tA, tB, tC);
    const floor = Math.max(7, 2*tMin); // ~2√óŒ∏_min or 7 K
    return (T < floor)
      ? `Rotational low-T note: classical rigid-rotor is unreliable below ~${tMin.toFixed(1)} K (Œ∏‚Çò·µ¢‚Çô). Results may deviate; a safer region is ‚â• ${floor.toFixed(1)} K.`
      : "";
  }

  async function computeAndRender(){
    const molecule = molSel.value;
    const T = parseFloat(tempEl.value);
    noteEl.textContent = "";

    if(!(T > 0)){
      tbody.innerHTML = '<tr><td colspan="3">Enter a valid temperature &gt; 0 K.</td></tr>';
      return;
    }

    // advisory for nonlinear rotors
    const msg = lowTRotationMessage(molecule, T);
    if (msg) noteEl.textContent = msg;

    const payload = { molecule, temperatureK: T };
    tbody.innerHTML = '<tr><td colspan="3">Calculating‚Ä¶</td></tr>';

    try {
      const res = await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      const raw = await res.text();
      let data;
      try { data = JSON.parse(raw); } catch { data = null; }

      if (!res.ok) {
        const msg   = (data && (data.error || "Request failed")) ;
        const extra = (data && (data.explanation || data.detail)) ? ` ‚Äî ${data.explanation || data.detail}` : "";
        tbody.innerHTML = `<tr><td colspan="3">Error: ${msg}${extra}</td></tr>`;
        if (data && data.explanation) noteEl.textContent = data.explanation;
        return;
      }

      const r = data;
      const rows = [
        ["C<sub>p</sub>", format(r.Cp), "J/(mol¬∑K)"],
        ["C<sub>v</sub>", format(r.Cv), "J/(mol¬∑K)"],
        ["S",             format(r.S ), "J/(mol¬∑K)"],
        ["U",             format(r.U/1000, 3), "kJ/mol"],
        ["H",             format(r.H/1000, 3), "kJ/mol"],
        ["G",             format(r.G/1000, 3), "kJ/mol"]
      ];
      tbody.innerHTML = rows
        .map(([k,v,u]) => `<tr><td><b>${k}</b></td><td>${v}</td><td>${u}</td></tr>`)
        .join("");

    } catch (e) {
      tbody.innerHTML = `<tr><td colspan="3">Error: ${e.message}</td></tr>`;
      console.error(e);
    }
  }

  // Chips (mobile quick-select)
  const chips = Array.from(document.querySelectorAll(".mols .chip"));
  function syncChips(){
    chips.forEach(btn =>
      btn.setAttribute("aria-pressed", btn.dataset.mol === molSel.value ? "true" : "false")
    );
  }
  chips.forEach(btn => {
    btn.addEventListener("click", () => {
      molSel.value = btn.dataset.mol;
      syncChips();
      computeAndRender();
    });
  });
  molSel.addEventListener("change", syncChips);

  document.getElementById('calc').addEventListener('click', computeAndRender);
  window.addEventListener("DOMContentLoaded", () => { syncChips(); computeAndRender(); });
</script>

</body>
</html>

